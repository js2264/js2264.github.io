<!DOCTYPE html>
<html lang="en-US">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="description" content="Simple minimalist theme">
<meta name="keywords" content="minimalist,blog,goa,hugo,developer">

<base href="">

<title>Jacques Serizay</title>

<meta name="generator" content="Hugo 0.80.0" />





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400|Roboto+Slab:400,700|Roboto:300,300i,400,400i,500,500i,700,700i">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="css/main.css">




<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

</head>
<body lang="en-US">
<div class="container">


<header class="row text-left title">
  <h1 class="title">Text mining and sentiment analysis in R</h1>
</header>
<section id="category-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-left meta">
      PUBLISHED ON JAN 29, 2020
      
      
      
      —
      
      
      <a class="meta" href="/categories/nlp">NLP</a>, 
      
      <a class="meta" href="/categories/r">R</a>, 
      
      <a class="meta" href="/categories/text-mining">TEXT MINING</a>
      
      
      
    </h6>
  </div>
  
</section>
<section id="content-pane" class="row">
  <div class="col-md-12 text-justify content">
    
</div>
  <div class="col-md-12 text-justify content">
    
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<div id="pre-processing-lotr-text-in-r" class="section level2">
<h2>Pre-processing LOTR text in R</h2>
<p>Complete LOTR text can be downloaded from Kaggle: <a href="https://www.kaggle.com/ashishsinhaiitr/lord-of-the-rings-text">https://www.kaggle.com/ashishsinhaiitr/lord-of-the-rings-text</a>. I edited the text very quickly, by simply removing the foreword and name of each of the 3 tomes. I also added the “book” II to VI (there was only an entry for “Book I”, the others were missing). Finally, I collated the three tomes together.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✔ ggplot2 3.3.3     ✔ purrr   0.3.4
## ✔ tibble  3.0.5     ✔ dplyr   1.0.3
## ✔ tidyr   1.1.2     ✔ stringr 1.4.0
## ✔ readr   1.4.0     ✔ forcats 0.5.0</code></pre>
<pre><code>## ── Conflicts ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="kw">library</span>(magrittr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;magrittr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     set_names</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     extract</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="co"># -- FUNCTIONS ----------------------</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a>fillUpLines &lt;-<span class="st"> </span><span class="cf">function</span>(lines) {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a>    res &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">sum</span>(lines), <span class="cf">function</span>(K) {</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a>        value &lt;-<span class="st"> </span><span class="kw">which</span>(lines)[K]</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a>        n_reps &lt;-<span class="st"> </span><span class="kw">ifelse</span>(</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a>            K <span class="op">&lt;</span><span class="st"> </span><span class="kw">sum</span>(lines),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a>            <span class="kw">which</span>(lines)[K<span class="op">+</span><span class="dv">1</span>] <span class="op">-</span><span class="st"> </span><span class="kw">which</span>(lines)[K],</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a>            <span class="kw">length</span>(lines) <span class="op">-</span><span class="st"> </span><span class="kw">which</span>(lines)[K] <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a>        )</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true"></a>        res &lt;-<span class="st"> </span><span class="kw">rep</span>(value, n_reps)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true"></a>        <span class="kw">return</span>(res)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true"></a>    })</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true"></a>    res &lt;-<span class="st"> </span><span class="kw">do.call</span>(c, res)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true"></a>    res &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="ot">NA</span>, <span class="kw">length</span>(lines) <span class="op">-</span><span class="st"> </span><span class="kw">length</span>(res)), res)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true"></a>    <span class="kw">return</span>(res)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true"></a>}</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true"></a>parseBook &lt;-<span class="st"> </span><span class="cf">function</span>(txt_path) {</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true"></a>    txt &lt;-<span class="st"> </span><span class="kw">readLines</span>(txt_path) <span class="op">%&gt;%</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true"></a><span class="st">        </span><span class="kw">tibble</span>(</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true"></a>            <span class="dt">line =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(.),</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true"></a>            <span class="dt">text =</span> .</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true"></a>        ) <span class="op">%&gt;%</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true"></a><span class="st">        </span><span class="kw">filter</span>(text <span class="op">!=</span><span class="st"> &quot;&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">line =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(.))</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true"></a>    line_tomes &lt;-<span class="st"> </span>txt<span class="op">$</span>text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_detect</span>(<span class="st">&quot;0. - The &quot;</span>)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true"></a>    line_books &lt;-<span class="st"> </span>txt<span class="op">$</span>text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_detect</span>(<span class="st">&quot;BOOK&quot;</span>)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true"></a>    line_chapters &lt;-<span class="st"> </span>txt<span class="op">$</span>text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_detect</span>(<span class="st">&quot;_Chapter&quot;</span>)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true"></a>    line_chapter_titles &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(txt) <span class="op">%in%</span><span class="st"> </span>{<span class="kw">which</span>(line_chapters) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>}</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true"></a>    txt <span class="op">%&lt;&gt;%</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">text =</span> <span class="kw">gsub</span>(<span class="st">&#39;_&#39;</span>, <span class="st">&#39;&#39;</span>, text)) <span class="op">%&gt;%</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">tome =</span> <span class="kw">fillUpLines</span>(line_tomes) <span class="op">%&gt;%</span><span class="st"> </span>txt<span class="op">$</span>text[.] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gsub</span>(<span class="st">&#39;^</span><span class="ch">\\</span><span class="st">s+|_&#39;</span>, <span class="st">&#39;&#39;</span>, .)) <span class="op">%&gt;%</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">book =</span> <span class="kw">fillUpLines</span>(line_books) <span class="op">%&gt;%</span><span class="st"> </span>txt<span class="op">$</span>text[.] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gsub</span>(<span class="st">&#39;^</span><span class="ch">\\</span><span class="st">s+|_&#39;</span>, <span class="st">&#39;&#39;</span>, .)) <span class="op">%&gt;%</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">chapter =</span> <span class="kw">fillUpLines</span>(line_chapters) <span class="op">%&gt;%</span><span class="st"> </span>txt<span class="op">$</span>text[.] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gsub</span>(<span class="st">&#39;^</span><span class="ch">\\</span><span class="st">s+|_&#39;</span>, <span class="st">&#39;&#39;</span>, .)) <span class="op">%&gt;%</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">chapter_title =</span> <span class="kw">fillUpLines</span>(line_chapter_titles) <span class="op">%&gt;%</span><span class="st"> </span>txt<span class="op">$</span>text[.] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gsub</span>(<span class="st">&#39;^</span><span class="ch">\\</span><span class="st">s+|_&#39;</span>, <span class="st">&#39;&#39;</span>, .)) <span class="op">%&gt;%</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">raw_text =</span> text) <span class="op">%&gt;%</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">text =</span> <span class="kw">gsub</span>(<span class="st">&#39;^</span><span class="ch">\\</span><span class="st">s+&#39;</span>, <span class="st">&#39;&#39;</span>, raw_text)) <span class="op">%&gt;%</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">nchar =</span> <span class="kw">nchar</span>(text))</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true"></a>    txt<span class="op">$</span>entry &lt;-<span class="st"> &quot;corpus&quot;</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true"></a>    txt<span class="op">$</span>entry[line_tomes] &lt;-<span class="st"> &quot;tome&quot;</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true"></a>    txt<span class="op">$</span>entry[line_books] &lt;-<span class="st"> &quot;book&quot;</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true"></a>    txt<span class="op">$</span>entry[line_chapters] &lt;-<span class="st"> &quot;chapter&quot;</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true"></a>    txt<span class="op">$</span>entry[line_chapter_titles] &lt;-<span class="st"> &quot;chapter_title&quot;</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true"></a>    txt[txt<span class="op">$</span>entry <span class="op">!=</span><span class="st"> &#39;corpus&#39;</span>, ] <span class="op">%&lt;&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">book =</span> <span class="ot">NA</span>, <span class="dt">chapter =</span> <span class="ot">NA</span>, <span class="dt">chapter_title =</span> <span class="ot">NA</span>)</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true"></a>    <span class="kw">return</span>(txt)</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true"></a>}</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true"></a><span class="co"># // FUNCTIONS ----------------------</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true"></a></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true"></a>txt_path &lt;-<span class="st"> &#39;txt/collated_books.txt&#39;</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true"></a>LOTR &lt;-<span class="st"> </span><span class="kw">parseBook</span>(txt_path)</span></code></pre></div>
<p>Let’s have a look at how the different books are structued. This is a nice little tidyverse-assisted data wrangling exercise. First, let’s see how many characters each chapter contains.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a>LOTR <span class="op">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>(tome, book, chapter, chapter_title) <span class="op">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">tally</span>(nchar) <span class="op">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> chapter, <span class="dt">y =</span> n, <span class="dt">fill =</span> chapter)) <span class="op">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>() <span class="op">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>book, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;Chapter&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;# of character / chapter&#39;</span>, <span class="dt">title =</span> <span class="st">&quot;Number of character per chapter&quot;</span>)</span></code></pre></div>
<p><img src="/blog/text_mining_and_sentiment_analysis_in_R_files/figure-html/unnamed-chunk-2-1.png" width="1152" /></p>
<p>There are some pretty big discrepancies between the length of each chapter in LOTR books. Now, let’s see whether Tolkien was more consistent in the length of paragraphs in each book.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a>LOTR <span class="op">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> chapter, <span class="dt">y =</span> nchar, <span class="dt">fill =</span> chapter)) <span class="op">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_violin</span>() <span class="op">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true"></a><span class="st">    </span>ggbeeswarm<span class="op">::</span><span class="kw">geom_beeswarm</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">size =</span> <span class="fl">0.4</span>, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">col =</span> <span class="st">&#39;black&#39;</span>) <span class="op">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_boxplot</span>(<span class="dt">fill =</span> <span class="st">&#39;white&#39;</span>, <span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">outlier.shape =</span> <span class="ot">NA</span>) <span class="op">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>() <span class="op">+</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>book, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">scale_y_log10</span>() <span class="op">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">annotation_logticks</span>(<span class="dt">sides =</span> <span class="st">&#39;l&#39;</span>) <span class="op">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;Chapter&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;# of character / paragraph&#39;</span>, <span class="dt">title =</span> <span class="st">&quot;Number of character per paragraph&quot;</span>)</span></code></pre></div>
<p><img src="/blog/text_mining_and_sentiment_analysis_in_R_files/figure-html/unnamed-chunk-3-1.png" width="1152" /></p>
<p>Quite interesting: some chapters (especially in Book I) have a stricking bi-modal distribution. Some “paragraphs” look like they are under 100 character each. If you dig into it, you’ll realize that these paragraphs are actually the songs/poems that are mostly found in the first tome of LOTR, notably when the hobbits encounter Tom Bombabil (one of my favorite chapters in the entire saga!).</p>
<p>Let’s confirm this quickly. After visual inspection of the text file, the songs mostly start with a repetition of 10 to 12 spaces (<code></code>).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>bool &lt;-<span class="st"> </span><span class="kw">grepl</span>(<span class="st">&quot;^          [a-zA-Z]|^           [a-zA-Z]|^            [a-zA-Z]&quot;</span>, LOTR<span class="op">$</span>raw_text)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a>LOTR[bool <span class="op">&amp;</span><span class="st"> </span>LOTR<span class="op">$</span>entry <span class="op">==</span><span class="st"> &quot;corpus&quot;</span>, <span class="st">&quot;entry&quot;</span>] &lt;-<span class="st"> &quot;song&quot;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a>LOTR <span class="op">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> chapter, <span class="dt">y =</span> nchar, <span class="dt">fill =</span> chapter)) <span class="op">+</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true"></a><span class="st">    </span>ggbeeswarm<span class="op">::</span><span class="kw">geom_beeswarm</span>(</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true"></a>        <span class="dt">alpha =</span> <span class="fl">0.4</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true"></a>        <span class="dt">size =</span> <span class="fl">0.6</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true"></a>        <span class="dt">fill =</span> <span class="ot">NA</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true"></a>        <span class="kw">aes</span>(<span class="dt">col =</span> entry)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>() <span class="op">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>book, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true"></a><span class="st">    </span><span class="kw">scale_y_log10</span>() <span class="op">+</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true"></a><span class="st">    </span><span class="kw">annotation_logticks</span>(<span class="dt">sides =</span> <span class="st">&#39;l&#39;</span>) <span class="op">+</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;Chapter&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;# of character / paragraph&#39;</span>, <span class="dt">title =</span> <span class="st">&quot;Number of character per paragraph&quot;</span>)</span></code></pre></div>
<p><img src="/blog/text_mining_and_sentiment_analysis_in_R_files/figure-html/unnamed-chunk-4-1.png" width="1152" /></p>
</div>
<div id="converting-the-tibble-into-an-even-tidier-format-with-tidytext" class="section level2">
<h2>Converting the tibble into an even tidier format with <code>tidytext</code></h2>
<p>The <code>tidytext</code> package is very useful to transform a tibble containing strings into a tidier tibble, with only 1 word per row. This is done with the <code>unnest_tokens()</code> function:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="kw">library</span>(tidytext)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a>LOTR</span></code></pre></div>
<pre><code>## # A tibble: 9,162 x 9
##     line text       tome    book  chapter chapter_title raw_text     nchar entry
##    &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;        &lt;int&gt; &lt;chr&gt;
##  1     1 01 - The … 01 - T… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;          …    31 tome 
##  2     2 BOOK I     01 - T… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;          …     6 book 
##  3     3 Chapter 01 01 - T… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;          …    10 chap…
##  4     4 A Long-ex… 01 - T… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;          …    21 chap…
##  5     5 When Mr. … 01 - T… BOOK… Chapte… A Long-expec… &quot;     When …   194 corp…
##  6     6 Bilbo was… 01 - T… BOOK… Chapte… A Long-expec… &quot;     Bilbo…   868 corp…
##  7     7 &#39;It will … 01 - T… BOOK… Chapte… A Long-expec… &quot;     &#39;It w…    90 corp…
##  8     8 But so fa… 01 - T… BOOK… Chapte… A Long-expec… &quot;     But s…   416 corp…
##  9     9 The eldes… 01 - T… BOOK… Chapte… A Long-expec… &quot;     The e…   580 corp…
## 10    10 Twelve mo… 01 - T… BOOK… Chapte… A Long-expec… &quot;     Twelv…   451 corp…
## # … with 9,152 more rows</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a>LOTR <span class="op">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest_tokens</span>(word, text)</span></code></pre></div>
<pre><code>## # A tibble: 471,247 x 9
##     line tome      book  chapter chapter_title raw_text        nchar entry word 
##    &lt;int&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;           &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1     1 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …    31 tome  01   
##  2     1 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …    31 tome  the  
##  3     1 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …    31 tome  fell…
##  4     1 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …    31 tome  of   
##  5     1 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …    31 tome  the  
##  6     1 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …    31 tome  ring 
##  7     2 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …     6 book  book 
##  8     2 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …     6 book  i    
##  9     3 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …    10 chap… chap…
## 10     3 01 - The… &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;          &quot;             …    10 chap… 01   
## # … with 471,237 more rows</code></pre>
<p>To illustrate the use of <code>tidytext</code> and how well it can be used with <code>tidyverse</code>-related tools, we can count how many times each character is named in each chapter:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a>characters &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;frodo&#39;</span>, <span class="st">&#39;sam&#39;</span>, <span class="st">&#39;gandalf&#39;</span>, <span class="st">&#39;aragorn&#39;</span>, <span class="st">&#39;pippin&#39;</span>, <span class="st">&#39;merry&#39;</span>, <span class="st">&#39;gimli&#39;</span>, <span class="st">&#39;legolas&#39;</span>, <span class="st">&#39;gollum&#39;</span>, <span class="st">&#39;bilbo&#39;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a>LOTR <span class="op">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(word <span class="op">%in%</span><span class="st"> </span>characters) <span class="op">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">factor</span>(word, characters)) <span class="op">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">count</span>(tome, book, chapter, chapter_title, word) <span class="op">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> chapter, <span class="dt">y =</span> n, <span class="dt">fill =</span> chapter)) <span class="op">+</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>() <span class="op">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_grid</span>(word<span class="op">~</span>book, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;Chapter&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;# of character citations&#39;</span>, <span class="dt">title =</span> <span class="st">&quot;Number of times each protagonist is named&quot;</span>)</span></code></pre></div>
<p><img src="/blog/text_mining_and_sentiment_analysis_in_R_files/figure-html/unnamed-chunk-6-1.png" width="1152" /></p>
<p>I love this figure. In just a few lines of code, the number of times each protagonist is named, in each chapter of each book, is computed and beautifully plotted. Just looking at this figure, I could tell what happens in each chapter:</p>
<ul>
<li>Book III, chapters 2 and 3 are most likely about Merry and Pippins when they are captured by the Orcs;</li>
<li>In Book V, Chapter 4, Pippin and Gandalf are together, defending Minas Tirith;</li>
<li>The return of Gollum in the third chapter of Book 6 signs the achievement of the quest with Gollum falling into the Cracks of Doom.</li>
</ul>
<p>And here is another type of representation of the # of occurence of each protagonist. The input data.frame stays the same, I’ve just changed a tiny bit the ggplot2 geometries, et voila!</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a>characters &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;frodo&#39;</span>, <span class="st">&#39;sam&#39;</span>, <span class="st">&#39;gandalf&#39;</span>, <span class="st">&#39;aragorn&#39;</span>, <span class="st">&#39;pippin&#39;</span>, <span class="st">&#39;merry&#39;</span>, <span class="st">&#39;gimli&#39;</span>, <span class="st">&#39;legolas&#39;</span>, <span class="st">&#39;gollum&#39;</span>, <span class="st">&#39;bilbo&#39;</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a>LOTR <span class="op">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(word <span class="op">%in%</span><span class="st"> </span>characters) <span class="op">%&gt;%</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">factor</span>(word, characters)) <span class="op">%&gt;%</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">count</span>(tome, book, chapter, chapter_title, word) <span class="op">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> chapter, <span class="dt">y =</span> n, <span class="dt">fill =</span> word)) <span class="op">+</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_col</span>(<span class="dt">position =</span> <span class="st">&#39;fill&#39;</span>) <span class="op">+</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_grid</span>(<span class="op">~</span>book, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>() <span class="op">+</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;Chapter&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;# of character citations&#39;</span>, <span class="dt">title =</span> <span class="st">&quot;Number of times each protagonist is named&quot;</span>)</span></code></pre></div>
<p><img src="/blog/text_mining_and_sentiment_analysis_in_R_files/figure-html/unnamed-chunk-7-1.png" width="1152" /></p>
</div>
<div id="character-networks" class="section level2">
<h2>Character networks</h2>
<p>TBD</p>
</div>
<div id="a-bit-of-sentiment-analysis" class="section level2">
<h2>A bit of sentiment analysis</h2>
<p>To find the most used non-stop words, one can (1) remove the “stop” words (as defined in the <code>stop_words</code> object), then (2) count the occurence of the remaining words. <code>tidytext</code> and <code>tidyverse</code> are, again, very useful to perform this:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="kw">data</span>(stop_words)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a>top_words &lt;-<span class="st"> </span>LOTR <span class="op">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">anti_join</span>(stop_words) <span class="op">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">count</span>(book, word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(book <span class="op">%in%</span><span class="st"> &quot;BOOK VI&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">top_n</span>(<span class="dv">100</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">pull</span>(word)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<pre><code>## Selecting by n</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a>top_words</span></code></pre></div>
<pre><code>##   [1] &quot;sam&quot;      &quot;frodo&quot;    &quot;dark&quot;     &quot;merry&quot;    &quot;road&quot;     &quot;time&quot;    
##   [7] &quot;looked&quot;   &quot;gandalf&quot;  &quot;hand&quot;     &quot;eyes&quot;     &quot;stood&quot;    &quot;day&quot;     
##  [13] &quot;hobbits&quot;  &quot;light&quot;    &quot;orc&quot;      &quot;passed&quot;   &quot;black&quot;    &quot;king&quot;    
##  [19] &quot;land&quot;     &quot;ring&quot;     &quot;left&quot;     &quot;days&quot;     &quot;folk&quot;     &quot;gate&quot;    
##  [25] &quot;heard&quot;    &quot;shire&quot;    &quot;west&quot;     &quot;set&quot;      &quot;night&quot;    &quot;tower&quot;   
##  [31] &quot;master&quot;   &quot;pippin&quot;   &quot;white&quot;    &quot;aragorn&quot;  &quot;cried&quot;    &quot;round&quot;   
##  [37] &quot;faramir&quot;  &quot;grey&quot;     &quot;hope&quot;     &quot;mordor&quot;   &quot;ran&quot;      &quot;ruffians&quot;
##  [43] &quot;rode&quot;     &quot;water&quot;    &quot;fell&quot;     &quot;north&quot;    &quot;head&quot;     &quot;rose&quot;    
##  [49] &quot;hear&quot;     &quot;shadow&quot;   &quot;city&quot;     &quot;coming&quot;   &quot;dead&quot;     &quot;hands&quot;   
##  [55] &quot;voice&quot;    &quot;found&quot;    &quot;mountain&quot; &quot;fire&quot;     &quot;lord&quot;     &quot;deep&quot;    
##  [61] &quot;lay&quot;      &quot;door&quot;     &quot;drew&quot;     &quot;east&quot;     &quot;fear&quot;     &quot;feet&quot;    
##  [67] &quot;gondor&quot;   &quot;red&quot;      &quot;sun&quot;      &quot;fair&quot;     &quot;heart&quot;    &quot;owyn&quot;    
##  [73] &quot;sat&quot;      &quot;wind&quot;     &quot;cotton&quot;   &quot;lady&quot;     &quot;stone&quot;    &quot;suddenly&quot;
##  [79] &quot;moment&quot;   &quot;slowly&quot;   &quot;leave&quot;    &quot;mind&quot;     &quot;people&quot;   &quot;darkness&quot;
##  [85] &quot;orcs&quot;     &quot;saruman&quot;  &quot;bag&quot;      &quot;bit&quot;      &quot;brought&quot;  &quot;silver&quot;  
##  [91] &quot;south&quot;    &quot;trees&quot;    &quot;walls&quot;    &quot;world&quot;    &quot;rohan&quot;    &quot;wall&quot;    
##  [97] &quot;chief&quot;    &quot;green&quot;    &quot;sword&quot;    &quot;bilbo&quot;    &quot;country&quot;  &quot;doom&quot;    
## [103] &quot;path&quot;     &quot;save&quot;</code></pre>
<p>I really like this list of top words. It clearly shows already that there are conflicting feelings in LOTR: we have <code>fear</code> opposing <code>hope</code>, <code>light</code> versus <code>dark</code>, and even temporal contrasts with <code>day</code> and <code>night</code>…</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true"></a>LOTR <span class="op">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(word <span class="op">%in%</span><span class="st"> </span>top_words) <span class="op">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">chapter_title =</span> <span class="kw">factor</span>(chapter_title, <span class="kw">unique</span>(chapter_title))) <span class="op">%&gt;%</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">factor</span>(word, top_words)) <span class="op">%&gt;%</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(book <span class="op">%in%</span><span class="st"> &quot;BOOK VI&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">count</span>(chapter_title, word) <span class="op">%&gt;%</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> word, <span class="dt">y =</span> n)) <span class="op">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_grid</span>(<span class="op">~</span>chapter_title, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>() <span class="op">+</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;Top words&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;# of occurences&#39;</span>, <span class="dt">title =</span> <span class="st">&quot;Number of times each word is mentionned&quot;</span>) <span class="op">+</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">6</span>))</span></code></pre></div>
<p><img src="/blog/text_mining_and_sentiment_analysis_in_R_files/figure-html/unnamed-chunk-9-1.png" width="1152" /></p>
<p>Ideally, one would want to re-organize terms based on how they occur.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a>words_order &lt;-<span class="st"> </span>LOTR <span class="op">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(word <span class="op">%in%</span><span class="st"> </span>top_words) <span class="op">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">factor</span>(word, top_words)) <span class="op">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(book <span class="op">%in%</span><span class="st"> &quot;BOOK VI&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">count</span>(chapter_title, word) <span class="op">%&gt;%</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">spread</span>(word, n) <span class="op">%&gt;%</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">column_to_rownames</span>(<span class="st">&#39;chapter_title&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">t</span>() <span class="op">%&gt;%</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">replace_na</span>(<span class="dv">0</span>) <span class="op">%&gt;%</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">dist</span>() <span class="op">%&gt;%</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">hclust</span>() <span class="op">%$%</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true"></a><span class="st">    </span>order <span class="op">%&gt;%</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true"></a><span class="st">    </span>top_words[.]</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a>LOTR <span class="op">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(word <span class="op">%in%</span><span class="st"> </span>top_words) <span class="op">%&gt;%</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">factor</span>(word, words_order)) <span class="op">%&gt;%</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(book <span class="op">%in%</span><span class="st"> &quot;BOOK VI&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">count</span>(chapter_title, word) <span class="op">%&gt;%</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> word, <span class="dt">y =</span> n)) <span class="op">+</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_grid</span>(<span class="op">~</span>chapter_title, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>() <span class="op">+</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;Top words&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;# of occurences&#39;</span>, <span class="dt">title =</span> <span class="st">&quot;Number of times each word is mentionned&quot;</span>) <span class="op">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">6</span>))</span></code></pre></div>
<p><img src="/blog/text_mining_and_sentiment_analysis_in_R_files/figure-html/unnamed-chunk-11-1.png" width="1152" /></p>
<p>By re-ordering the words, we can clearly see that words describing the hobbits heading back the the Shire are grouped together, while humans returning to the Gondor form another cluster, and orcs and the Mordor in a last separate clique.</p>
<p>Let’s now focus on sentiment analysis. We can get the <code>NRC</code> sentiment lexicon published by Mohammad, Saif M. and Turney, Peter D. in 2013.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true"></a>sentiment_words &lt;-<span class="st"> </span><span class="kw">get_sentiments</span>(<span class="st">&quot;nrc&quot;</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true"></a>sentiments &lt;-<span class="st"> </span>LOTR <span class="op">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>(book) <span class="op">%&gt;%</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">progression =</span> <span class="kw">as.integer</span>(<span class="kw">cut</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">n</span>(), <span class="dv">100</span>))) <span class="op">%&gt;%</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>(book, progression) <span class="op">%&gt;%</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">inner_join</span>(sentiment_words) <span class="op">%&gt;%</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">count</span>(book, sentiment)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true"></a>sentiments <span class="op">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(sentiment <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;positive&#39;</span>, <span class="st">&#39;negative&#39;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> progression, <span class="dt">y =</span> n, <span class="dt">fill =</span> sentiment)) <span class="op">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_grid</span>(book<span class="op">~</span>sentiment, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>() <span class="op">+</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;Chapter&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;Number of occurences&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;Number of times a word occurs&#39;</span>)</span></code></pre></div>
<p><img src="/blog/text_mining_and_sentiment_analysis_in_R_files/figure-html/unnamed-chunk-12-1.png" width="1152" /></p>
<p>We can focus on Book VI for a bit, with more of the sentiments described by the <code>NCR</code> lexicon:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true"></a>sentiments_bookVI &lt;-<span class="st"> </span>LOTR <span class="op">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(chapter) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(book)) <span class="op">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(book <span class="op">==</span><span class="st"> &#39;BOOK VI&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">progression =</span> <span class="kw">as.integer</span>(<span class="kw">cut</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">n</span>(), <span class="dv">100</span>))) <span class="op">%&gt;%</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">group_by</span>(progression) <span class="op">%&gt;%</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">inner_join</span>(sentiment_words) <span class="op">%&gt;%</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">count</span>(sentiment)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true"></a>sentiments_bookVI <span class="op">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> progression, <span class="dt">y =</span> n, <span class="dt">fill =</span> sentiment), <span class="dt">col =</span> <span class="ot">NA</span>) <span class="op">+</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_vline</span>(<span class="kw">aes</span>(<span class="dt">xintercept =</span> <span class="dv">37</span>), <span class="dt">col =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">linetype =</span> <span class="st">&#39;dashed&#39;</span>, <span class="dt">size =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_vline</span>(<span class="kw">aes</span>(<span class="dt">xintercept =</span> <span class="dv">75</span>), <span class="dt">col =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">linetype =</span> <span class="st">&#39;dashed&#39;</span>, <span class="dt">size =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_grid</span>(sentiment<span class="op">~</span>., <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>() <span class="op">+</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">vjust =</span> <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;Progression through book VI&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;Sentiment score&#39;</span>, <span class="dt">title =</span> <span class="st">&#39;Sentiment analysis of Book VI&#39;</span>)</span></code></pre></div>
<p><img src="/blog/text_mining_and_sentiment_analysis_in_R_files/figure-html/unnamed-chunk-13-1.png" width="1152" /></p>
<p>The different sentiments highlight the different key events occuring in the Book VI. For instance:</p>
<ul>
<li>At the first third of Book VI: Frodo and Sam reach the Cracks of Doom. It is a pretty dark moment of despair, exhaustion and depression. Yet, it signs the end of all these feelings and the return of hope and joy.</li>
<li>At the three quarters of Book VI, the Company arrives in Bree and Frodo recalls his long adventures. It is a happy moment with friends gathering in a safe and known place.</li>
</ul>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>This post shows how the <code>tidyverse</code> can be extended to text mining, thanks to the <code>tidytext</code> package. By keeping things tidy, neat analyses and powerful visualization can be obtained very easily, in few lines of code.</p>
</div>

  </div>
</section>
<section id="tag-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-right meta">
      
      
      
      TAGS:
      
      
      <a class="meta" href="/tags/nlp">NLP</a>, 
      
      <a class="meta" href="/tags/r">R</a>, 
      
      <a class="meta" href="/tags/text-mining">TEXT MINING</a>
      
      
      
    </h6>
  </div>
  
</section>




<section id="menu-pane" class="row menu text-center">
  
  
  
  <span><a class="menu-item" href="/blog">blog</a></span>
  
  
  <span><a class="menu-item" href="/blog/preprint-tissue-spe-orga/"> | next &gt;</a></span>
  
  
  <h4 class="text-center"><a class="menu-item" href="">home</a></h4>
</section>



<footer class="row text-center footer">
  <hr />
  
  <h6 class="text-center copyright">© 2021. Jacques Serizay. <a href="http://creativecommons.org/licenses/by/3.0/">Some Rights Reserved</a>.</h6>
  
</footer>

</div>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'XYZ', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="js/main.js"></script>
</body>
</html>


